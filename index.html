<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Builder Menu RS</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f; color: white; margin: 0;
    }
    header {
      background: #27293d; padding: 20px; text-align: center; font-size: 24px;
    }
    .menu { padding: 20px; }
    .button {
      background-color: #4CAF50; color: white;
      border: none; padding: 10px 20px;
      font-size: 16px; border-radius: 6px;
      cursor: pointer; margin-bottom: 15px;
    }
    .builder-container {
      background: #2d2f44; padding: 15px; border-radius: 8px;
      max-width: 700px; margin: auto;
    }
    .builder-item {
      display: flex; align-items: center;
      background: #393b5a; padding: 10px;
      margin-bottom: 10px; border-radius: 6px;
      cursor: move;
    }
    .builder-item input[type="text"] {
      flex: 1; margin: 0 10px; padding: 6px;
      border-radius: 4px; border: none;
      font-size: 16px;
    }
    .builder-item button {
      background-color: #3498db;
      color: white; border: none;
      padding: 6px 10px; border-radius: 4px;
      font-size: 14px; cursor: pointer;
    }
    .drag-icon {
      font-size: 18px; padding: 0 10px;
      cursor: grab;
    }
  </style>
</head>
<body>

<header>üéõÔ∏è Builder Menu Aplikasi RS</header>
<div class="menu" style="text-align:center;">
  <button class="button" onclick="tambahBuilderMenu()">+Menu</button>
</div>

<div class="builder-container" id="builderList">
  <!-- Builder menu akan ditambahkan di sini -->
</div>

<script>
  let menuCounter = 1;

  function tambahBuilderMenu() {
    const container = document.getElementById('builderList');
    
    const row = document.createElement('div');
    row.className = 'builder-item';
    row.draggable = true;

    row.innerHTML = `
      <input type="checkbox" checked title="Aktif / Nonaktif">
      <input type="text" value="Menu ${menuCounter++}" />
      <button>+Icon</button>
      <div class="drag-icon">‚ÜïÔ∏è</div>
    `;

    // Tambahkan fungsi drag
    row.addEventListener('dragstart', (e) => {
      e.dataTransfer.setData('text/plain', '');
      row.classList.add('dragging');
    });

    row.addEventListener('dragend', () => {
      row.classList.remove('dragging');
    });

    container.appendChild(row);
  }

  // Drag and drop logic
  const builderList = document.getElementById('builderList');

  builderList.addEventListener('dragover', (e) => {
    e.preventDefault();
    const dragging = document.querySelector('.dragging');
    const afterElement = getDragAfterElement(builderList, e.clientY);
    if (afterElement == null) {
      builderList.appendChild(dragging);
    } else {
      builderList.insertBefore(dragging, afterElement);
    }
  });

  function getDragAfterElement(container, y) {
    const items = [...container.querySelectorAll('.builder-item:not(.dragging)')];
    return items.reduce((closest, child) => {
      const box = child.getBoundingClientRect();
      const offset = y - box.top - box.height / 2;
      if (offset < 0 && offset > closest.offset) {
        return { offset: offset, element: child };
      } else {
        return closest;
      }
    }, { offset: Number.NEGATIVE_INFINITY }).element;
  }
</script>

</body>
</html>